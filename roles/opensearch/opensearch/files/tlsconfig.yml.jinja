#   -------------------------------------------------------------
#   OpenSearch configuration
#   - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
#   Project:        Nasqueron
#   License:        Trivial work, not eligible to copyright
#   Source file:    roles/opensearch/opensearch/files/tlsconfig.yml.jinja
#   -------------------------------------------------------------
#
#   <auto-generated>
#       This file is managed by our rOPS SaltStack repository.
#
#       Changes to this file may cause incorrect behavior
#       and will be lost if the state is redeployed.
#   </auto-generated>

#   -------------------------------------------------------------
#   CA
#   - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

ca:
   root:
      dn: CN=root.ca-{{ config['cluster_name'] }}.{{ domain_name }},OU=CA,DC=nasqueron,DC=org
      keysize: 2048
      validityDays: 730
      pkPassword: none
      file: root-ca.pem

defaults:
      validityDays: 730
      pkPassword: none
      httpsEnabled: true
      reuseTransportCertificatesForHttp: false
      verifyHostnames: false
      resolveHostnames: false

#   -------------------------------------------------------------
#   Nodes
#   - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

nodes:
{% for node in config['nodes_certificates'] %}
  - name: {{ node['id'] }}
    dn: CN={{ node['fqdn'] }},OU=Infrastructure,DC=nasqueron,DC=org
    dns: {{ node['fqdn'] }}
    ip: {{ node['ip'] }}
{% endfor %}

#   -------------------------------------------------------------
#   Clients
#   - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

clients:
  - name: admin
    dn: CN=admin.{{ config['cluster_name'] }}.{{ domain_name }},OU=CA,DC=nasqueron,DC=org
    admin: True

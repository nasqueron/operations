#   -------------------------------------------------------------
#   Kernel state configuration
#   - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
#   Project:        Nasqueron
#   Created:        2017-11-06
#   License:        Trivial work, not eligible to copyright
#   Source file:    roles/core/sysctl/files/sysctl.conf
#   -------------------------------------------------------------
#
#   <auto-generated>
#       This file is managed by our rOPS SaltStack repository.
#
#       Changes to this file may cause incorrect behavior
#       and will be lost if the state is redeployed.
#   </auto-generated>
{% if is_router %}
#   -------------------------------------------------------------
#   Network
#   - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

net.inet.ip.forwarding=1
{% endif %}
#   -------------------------------------------------------------
#   VFS â€” kernel interface to file systems
#   - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

# Allow user to mount disks (required by FUSE or PEFS)
vfs.usermount=1

{%- if use_zfs %}

{% if mem < 4096 %}
# Maximum size of the Adaptive Replacement Cache (ARC).
vfs.zfs.arc_max = 2147483648
{% endif %}

# Keep prefetch: this works by reading larger blocks than were requested
# into the ARC in hopes that the data will be needed soon.
vfs.zfs.prefetch_disable=0

{% endif -%}

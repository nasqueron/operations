<?xml version="1.0" encoding="UTF-8"?>
<!--
    - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
    Orbeon :: Configuration
    - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
    Project:      Nasqueron
    License:      Trivial work, not eligible to copyright
    Source file:  roles/paas-docker/containers/files/orbeon/nasqueron_forms/properties-local.xml
    _____________________________________________________________

    <auto-generated>
        This file is managed by our rOPS SaltStack repository.

        Changes to this file may cause incorrect behavior
        and will be lost if the state is redeployed.
    </auto-generated>
-->

<properties xmlns:xs="http://www.w3.org/2001/XMLSchema"
            xmlns:oxf="http://www.orbeon.com/oxf/processors"
            xmlns:fr="http://orbeon.org/oxf/xml/form-runner">

    <!-- URL -->

    <property as="xs:anyURI" name="oxf.url-rewriting.service.base-uri"
        value="http://localhost:8080/orbeon"/>


    <!-- Crypto -->

    <property as="xs:string" name="oxf.crypto.password">
        <![CDATA[{{ secret_key }}]]>
    </property>

    <property as="xs:integer" name="oxf.crypto.key-length"
        value="256"/>

    <property as="xs:string" name="oxf.crypto.hash-algorithm"
        value="SHA-256"/>


    <!-- Authentication -->

    <property as="xs:string" name="oxf.fr.authentication.method"
        value="container"/>

    <property as="xs:string" name="oxf.fr.authentication.container.roles"
        value="orbeon-admin"/>

    <property as="xs:boolean" name="oxf.fr.authentication.user-menu.enable"
        value="true"/>


    <!-- Database configuration -->

    <property as="xs:string" name="oxf.fr.persistence.provider.*.*.*"
        value="postgresql"/>

    <property as="xs:string" name="oxf.fr.persistence.postgresql.datasource"
        value="postgresql" />

    <property as="xs:boolean" name="oxf.fr.persistence.postgresql.create-flat-view"
        value="true"/>

    <property as="xs:boolean" name="oxf.fr.persistence.exist.active"
        value="false"/>


    <!-- SMTP -->

    <property as="xs:string" name="oxf.fr.email.smtp.host.*.*"
        value="{{ smtp }}" />

    <property as="xs:string" name="oxf.fr.email.from.*.*"
        value="no-reply@{{ host }}"/>


    <!-- Static resources -->

    <property as="xs:string" name="oxf.fr.css.custom.uri.*.*">
        https://assets.nasqueron.org/css/forms/nasqueron-forms.css
    </property>

    <property as="xs:anyURI" name="oxf.fr.default-logo.uri.*.*">
        https://assets.nasqueron.org/logos/logo-white-32px.png
    </property>


    <!-- Form properties :: nasqueron-join :: contact -->

    <property as="xs:string" name="oxf.fr.detail.buttons.nasqueron-join.contact">
        save-progress send
    </property>

    <property as="xs:string" name="oxf.fr.detail.process.send.nasqueron-join.contact"
        value='require-valid
               then save
               then email
               then navigate("https://join.nasqueron.org/contact-success.html")
               recover navigate("https://join.nasqueron.org/contact-failure.html")' />

    <property as="xs:string" name="oxf.fr.email.to.nasqueron-join.*"
        value="dereckson+nasqueron+join@espace-win.org" />


    <!-- Form properties :: nasqueron-requests :: agora-account -->

    <property as="xs:string" name="oxf.fr.detail.buttons.nasqueron-requests.*">
        send
    </property>

    <property as="xs:string" name="oxf.fr.detail.process.send.nasqueron-requests.agora-account"
        value='require-valid
               then save
               then email
               then navigate("https://agora.nasqueron.org/Agora:Account_request/Successful")
               recover navigate("https://agora.nasqueron.org/Agora:Account_request/Failure")' />

    <property as="xs:string" name="oxf.fr.email.to.nasqueron-requests.*"
        value="dereckson+nasqueron+requests@espace-win.org" />

</properties>
